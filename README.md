# opsgenie-logdl
Script for finding and downloading opsgenie log entries.  As of 20 Feb 2021, this is very basic but I could see lots and lots of functionality being added.  This is more a POC than anything, and I may occasionally use it but it's not necessarily too useful at present.

When you first run logdl, it will check for $HOME/logdl presence.  If it doesn't exist, it will make that directory.  Then it asks for your opsgenie api key.  
This is an api key generated by a generic api integration (not one from settings - API key management) and it needs to have READ and CONFIGURATION access.

I've included (commented out) lines that I used for debugging.

The script proceeds in 4 steps.
1)  downloads list of log entries, delimited at the beginning by a timestamp, and at the end by the entry #.  So the first one listed is the first one after your timestamp, and then it pulls however many entries you asked for.  This goes to 1.entrylist.json
2)  run that output through grep -o to get the timestamps only, which lets us get dl links.  This goes to 2.timestamps.txt
3)  convert timestamps to download curls, push output to 3.output
4)  perform the download of each line from 3.output, this goes to 4.output

Your API key is stored in $HOME/logdl/logdl.conf ... permissions set as 700 but it's still there.

Functionality I can envision adding:
  - Automatic conversion of local to GMT
  - Options to draw out certain info from downloaded entries, like (if applicable) message + uniqueAlertID, email body etc
  - getopts for help and other options
  - ask to remove api key if desired
